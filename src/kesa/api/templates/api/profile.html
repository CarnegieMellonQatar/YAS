{% extends "api/index.html" %}

{% block content %}
    <div ng-controller="profileController as profileController" ng-cloak>
        <h2>{$ profileController.user.fields.username $}'s Stories</h2>
        <div>
            <h3>Stories: {$ profileController.user.fields.stories $}</h3>
            <h3>Contributions: {$ profileController.user.fields.contributions $}</h3>
        </div>
        <div ng-repeat="story in profileController.stories">
            <a href="/{$ story.pk $}/story"><h2>{$ story.fields.title $}</h2></a>
            <h2>Likes: {$ story.fields.likes $}</h2>
            <h2>Contributors: {$ story.fields.contributors $}</h2>
            <h2>Status: {$ profileController.getStatus(story.fields) $}</h2>
            <button ng-click="profileController.deleteStory(story)">Delete</button>
        </div>
        <button ng-show="profileController.haveMore" ng-click="profileController.getMoreStories()">Show More</button>
    </div>
{% endblock %}