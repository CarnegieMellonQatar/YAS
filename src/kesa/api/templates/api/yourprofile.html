{% extends "api/index.html" %}

{% block content %}
<div class="dashboard-container" ng-controller="profileController as pc" ng-cloak>
    <div class="user-container">
        <div class="row">
            <div class="col-xs-3">
                <img class=" main-profile-pic img-circle" ng-src="/api/img/{$pc.uname$}">
            </div>
            <div class="col-xs-9">
                <div class="main-username">{$ pc.user.fields.username $}</div>
                <div class="row main-stats-row">
                    <div class="col-xs-4">
                        <i class="fa fa-heart fa-2x" aria-hidden="true"></i>
                        <span class="faint-sub">{$ pc.userLikes.likes $}</span>
                    </div>
                    <div class="col-xs-4">
                        <i class="fa fa-user fa-2x" aria-hidden="true"></i>
                        <span class="faint-sub">{$ pc.userCount.contributors $}</span>
                    </div>
                    <div class="col-xs-4">
                        <i class="fa fa-book fa-2x" aria-hidden="true"></i>
                        <span class="faint-sub">{$ pc.totalReads.totalReads $}</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="dashboard-tab-container">
            <div class="row">
                <div class="col-xs-3 dashboard-tab"
                     ng-class="{'tab-selected': pc.isSet(0)}"
                     ng-click="pc.set(0)"> Stories
                </div>
                <div class="col-xs-3 dashboard-tab"
                     ng-class="{'tab-selected': pc.isSet(1)}"
                     ng-click="pc.set(1)"> Analytics
                </div>
                <div class="col-xs-3 dashboard-tab"
                     ng-class="{'tab-selected': pc.isSet(2)}"
                     ng-click="pc.set(2)">Liked Stories
                </div>
                <div class="col-xs-3 dashboard-tab"
                     ng-class="{'tab-selected': pc.isSet(3)}"
                     ng-click="pc.set(3)">Contributed Stories
                </div>
            </div>
        </div>
    </div>
    <div class="profile-story-list" ng-show="pc.isSet(0) && pc.stories !== []">
        <div class="profile-story-entry" ng-repeat="story in pc.stories">
            <a href="/{$ story.fields.userInfo.fields.username $}/profile">
                <div class="profile-story-entry-author"> {$ story.fields.userInfo.fields.username $}</div>
            </a>
            <a href="/{$ story.pk $}/story">
                <div class="story-entry-title">{$ story.fields.title $}</div>
            </a>
            <div class="profile-story-entry-stats">
                <div class="profile-story-entry-likes" data-toggle="tooltip" title="likes">
                    <i class="fa fa-heart fa-2x" aria-hidden="true"></i>
                    <span class="faint-sub">{$ story.fields.likes $}</span>
                </div>
                <div class="profile-story-entry-contributors" data-toggle="tooltip" title="contributors">
                    <i class="fa fa-user fa-2x" aria-hidden="true"></i>
                    <span class="faint-sub">{$ story.fields.contributors $}</span>
                </div>
            </div>
        </div>
         <div class="profile-story-entry" ng-repeat="story in pc.stories">
            <a href="/{$ story.fields.userInfo.fields.username $}/profile">
                <div class="profile-story-entry-author"> {$ story.fields.userInfo.fields.username $}</div>
            </a>
            <a href="/{$ story.pk $}/story">
                <div class="story-entry-title">{$ story.fields.title $}</div>
            </a>
            <div class="profile-story-entry-stats">
                <div class="profile-story-entry-likes" data-toggle="tooltip" title="likes">
                    <i class="fa fa-heart fa-2x" aria-hidden="true"></i>
                    <span class="faint-sub">{$ story.fields.likes $}</span>
                </div>
                <div class="profile-story-entry-contributors" data-toggle="tooltip" title="contributors">
                    <i class="fa fa-user fa-2x" aria-hidden="true"></i>
                    <span class="faint-sub">{$ story.fields.contributors $}</span>
                </div>
            </div>
            <button class="profile-delete-story-button" ng-click="pc.deleteStory(story)">Delete</button>
        </div>
    </div>
    <div class="profile-story-list" ng-show="pc.isSet(0) && pc.stories === []">
        <h1 class="analytics-header"> No Stories here!</h1>
    </div>
    <div class="profile-liked-stories" ng-show="pc.isSet(2)">
        <h1>liked stories</h1>
    </div>
    <div class="profile-contributions" ng-show="pc.isSet(3)">
        <h1>Contributions</h1>
    </div>

    {$ pc.graphAnalytics $}
    <!--<h2>{$ pc.user.fields.username $}'s Stories</h2>-->
    <!--<div>-->
        <!--<h3>Stories: {$ pc.user.fields.stories $}</h3>-->
        <!--<h3>Contributions: {$ pc.user.fields.contributions $}</h3>-->
    <!--</div>-->
    <!--<div ng-repeat="story in pc.stories">-->
        <!--<a href="/{$ story.pk $}/story"><h2>{$ story.fields.title $}</h2></a>-->
        <!--<h2>Likes: {$ story.fields.likes $}</h2>-->
        <!--<h2>Contributors: {$ story.fields.contributors $}</h2>-->
        <!--<h2>Status: {$ pc.getStatus(story.fields) $}</h2>-->
        <!--<button ng-click="pc.deleteStory(story)">Delete</button>-->
    <!--</div>-->
    <!--<button ng-show="pc.haveMore" ng-click="pc.getMoreStories()">Show More</button>-->
    <!--<div>-->
        <!--<div class="dnd" id="draganddrop" ng-init="pc.createDragNDropZone()">-->
            <!--<form class="complex_form" id="add_image_form2" name="add_image_form2"-->
                  <!--ng-submit="pc.addImageDND()">-->
                <!--<div class="form_title">Upload Profile Picture</div>-->
                <!--<div dropzone="dropzoneConfig" class="dropzone"></div>-->
                <!--<input type="submit" class="btn" value="Add The Image"/>-->
            <!--</form>-->
            <!--<div class="header_button" id="delButn" ng-click="pc.clearDND()"></div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<img ng-src="/api/img/{$pc.uname$}">-->
    <!--<div>-->
        <!--<h1>-->
            <!--Analytics-->
        <!--</h1>-->
        <!--<div>-->
            <!--<h2>-->
                <!--Graph Analatics-->
            <!--</h2>-->
            <!--{$ pc.graphAnalytics $}-->
        <!--</div>-->
        <!--<div>-->
            <!--<h2>-->
                <!--Story Analatics-->
            <!--</h2>-->
            <!--{$ pc.storyAnalytics $}-->
        <!--</div>-->
        <!--<div>-->
            <!--<h2>-->
                <!--hearts-->
            <!--</h2>-->
            <!--{$ pc.userLikes.likes $}-->
        <!--</div>-->
        <!--<div>-->
            <!--<h2>-->
                <!--contributors-->
            <!--</h2>-->
            <!--{$ pc.userCount.contributors $}-->
        <!--</div>-->
        <!--<div>-->
            <!--<h2>-->
                <!--contributed stories-->
            <!--</h2>-->
            <!--{$ pc.userContStories $}-->
        <!--</div>-->
        <!--<div>-->
            <!--<h2>-->
                <!--liked stories-->
            <!--</h2>-->
            <!--{$ pc.likedList$}-->
        <!--</div>-->
    <!--</div>-->
</div>
{% endblock %}